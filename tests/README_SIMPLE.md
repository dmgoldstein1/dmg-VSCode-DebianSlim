# Testing Infrastructure

Generated by Copilot (GPT-4o), 2025-08-30

This directory contains the comprehensive testing infrastructure for the VS Code Debian Slim Docker build system.

## Directory Structure

- `run_tests.sh` - Master test runner script
- `package.json` - Test dependencies and npm scripts  
- `configs/` - Test configuration files
- `integration/` - Integration tests for the complete build system
- `unit/` - Unit tests for individual components
- `extension/` - VS Code extension tests

## Usage

Run all tests:

```bash
./run_tests.sh
```

Run specific test types:

```bash
./run_tests.sh unit          # Unit tests only
./run_tests.sh integration   # Integration tests only  
./run_tests.sh extension     # Extension tests only
./run_tests.sh security      # Security tests only
```

Options:

```bash
./run_tests.sh --verbose all     # Verbose output
./run_tests.sh --parallel all    # Parallel execution
./run_tests.sh --no-cleanup all  # Keep test artifacts
```

## Test Types

**Unit Tests** - Test individual shell script functions and utilities

**Integration Tests** - Test complete Docker build workflows and VS Code tunnel setup

**Extension Tests** - Test VS Code extension logic including log parsing and configuration

**Security Tests** - ShellCheck analysis, secret detection, and YAML validation

## Docker Testing

Use Docker Compose for isolated testing:

```bash
docker-compose -f docker-compose.test.yml up --build
```

## GitHub CI/CD Integration

The testing infrastructure integrates with GitHub Actions workflows:

- Main CI/CD pipeline (`.github/workflows/ci-cd.yml`)
- Security scanning pipeline (`.github/workflows/security.yml`)

Required status checks:

- Lint and Validate
- Unit Tests  
- Integration Tests
- Docker Build and Test
- Security Analysis

## Logs and Debugging

Test logs are stored in the `logs/` directory:

- `test-run-*.log` - Integration test logs
- `unit-test-*.log` - Unit test logs
- `test-runner-*.log` - Master test runner logs

Common debugging commands:

```bash
# Find recent failures
grep -r "ERROR\|FAIL" logs/ | tail -20

# Check syntax
bash -n script_name.sh

# Run with debugging  
bash -x script_name.sh
```

## Performance Expectations

| Test Type | Expected Duration |
|-----------|------------------|
| Unit Tests | < 30s |
| Extension Tests | < 2m |  
| Security Tests | < 1m |
| Integration Tests | < 15m |
| Full Test Suite | < 20m |

For questions or issues, check the logs or open an issue in the repository.
